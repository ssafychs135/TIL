# 파이썬 컴프리헨션 (Comprehension)

컴프리헨션(Comprehension)은 파이썬에서 매우 유용하고 강력한 기능 중 하나로, 기존의 시퀀스(리스트, 딕셔너리, 세트 등)를 사용하여 새로운 시퀀스를 간결하고 효율적으로 생성할 수 있는 방법입니다. for 루프와 조건문을 한 줄에 압축하여 표현할 수 있어 코드를 더 읽기 쉽고 파이썬답게 만들어 줍니다.

### 컴프리헨션의 종류

파이썬에서는 주로 세 가지 종류의 컴프리헨션을 사용합니다.

1.  **리스트 컴프리헨션 (List Comprehension)**
2.  **딕셔너리 컴프리헨션 (Dictionary Comprehension)**
3.  **세트 컴프리헨션 (Set Comprehension)**

### 1. 리스트 컴프리헨션 (List Comprehension)

가장 흔하게 사용되는 컴프리헨션으로, 기존 리스트나 다른 순회 가능한(iterable) 객체를 기반으로 새로운 리스트를 생성합니다.

**기본 구조:**

```python
new_list = [expression for item in iterable if condition]
```

*   `expression`: 새로운 리스트의 각 항목이 될 표현식입니다. `item`을 변형하거나 그대로 사용할 수 있습니다.
*   `item`: 원본 `iterable`에서 가져온 각 요소입니다.
*   `iterable`: 리스트, 튜플, 문자열 등 순회 가능한 모든 객체입니다.
*   `if condition` (선택 사항): `True`인 경우에만 `expression`을 평가하여 새 리스트에 추가합니다.

**예시:**

**예시 1: 1부터 10까지의 제곱으로 이루어진 리스트 만들기**

```python
# 일반적인 for 루프
squares = []
for i in range(1, 11):
    squares.append(i * i)
print(squares)  # [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]

# 리스트 컴프리헨션
squares_comp = [i * i for i in range(1, 11)]
print(squares_comp)  # [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]
```

**예시 2: 짝수만 제곱하여 리스트 만들기**

```python
# 일반적인 for 루프와 if 조건문
even_squares = []
for i in range(1, 11):
    if i % 2 == 0:
        even_squares.append(i * i)
print(even_squares)  # [4, 16, 36, 64, 100]

# 리스트 컴프리헨션과 if 조건문
even_squares_comp = [i * i for i in range(1, 11) if i % 2 == 0]
print(even_squares_comp)  # [4, 16, 36, 64, 100]
```

### 2. 딕셔너리 컴프리헨션 (Dictionary Comprehension)

리스트 컴프리헨션과 유사하지만, `{key_expression: value_expression}` 형태로 새로운 딕셔너리를 생성합니다.

**기본 구조:**

```python
new_dict = {key_expression: value_expression for item in iterable if condition}
```

**예시:**

**예시 1: 숫자를 키로, 제곱을 값으로 하는 딕셔너리 만들기**

```python
# 일반적인 for 루프
squares_dict = {}
for i in range(1, 6):
    squares_dict[i] = i * i
print(squares_dict)  # {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}

# 딕셔너리 컴프리헨션
squares_dict_comp = {i: i * i for i in range(1, 6)}
print(squares_dict_comp)  # {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}
```

**예시 2: 특정 길이 이상의 단어만 키로, 길이를 값으로 하는 딕셔너리 만들기**

```python
words = ['apple', 'banana', 'cherry', 'kiwi', 'orange']
word_lengths = {word: len(word) for word in words if len(word) > 5}
print(word_lengths)  # {'banana': 6, 'cherry': 6, 'orange': 6}
```

### 3. 세트 컴프리헨션 (Set Comprehension)

리스트 컴프리헨션과 매우 유사하지만, `{}`를 사용하여 중복된 값을 허용하지 않는 세트(set)를 생성합니다.

**기본 구조:**

```python
new_set = {expression for item in iterable if condition}
```

**예시:**

**예시 1: 리스트에서 중복을 제거하고 각 숫자의 제곱으로 세트 만들기**

```python
numbers = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]
unique_squares = {x * x for x in numbers}
print(unique_squares)  # {1, 4, 9, 16}
```

### 컴프리헨션의 장점

1.  **간결성**: `for` 루프와 `if` 조건문을 한 줄로 압축하여 코드가 더 짧고 깔끔해집니다.
2.  **가독성**: 익숙해지면, `for` 루프보다 의도가 더 명확하게 드러나 가독성이 향상될 수 있습니다.
3.  **성능**: 대부분의 경우, 파이썬 인터프리터가 내부적으로 최적화하기 때문에 일반적인 `for` 루프보다 약간 더 빠릅니다.

### 주의할 점

*   **복잡성**: 너무 많은 `for` 루프나 복잡한 `if` 조건을 중첩하면 오히려 가독성이 떨어질 수 있습니다. 이럴 때는 일반적인 `for` 루프를 사용하는 것이 더 나을 수 있습니다.
*   **제너레이터 표현식**: `()`를 사용하면 제너레이터 표현식이 됩니다. 이는 메모리를 효율적으로 사용해야 할 때 유용합니다.

컴프리헨션은 파이썬의 강력한 기능이므로, 익숙해지면 코드를 더 효율적이고 아름답게 작성할 수 있습니다.
